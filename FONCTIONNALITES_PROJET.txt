# Sp√©cification fonctionnelle exhaustive du projet horaire

## 1. Modules principaux

### Module 1 : Calculette de d√©part/arriv√©e
- Saisie de l'heure d'arriv√©e (HH:MM ou HH:MM:SS)
- Saisie des pauses matin (d√©but/fin ou dur√©e)
- Saisie des pauses midi (d√©but/fin ou dur√©e)
- Saisie de l'heure de d√©part
- Calcul automatique de l'heure de d√©part ou d'arriv√©e selon les champs remplis
- Mise en forme automatique des horaires (ex : 6 devient 06:00)
- Indicateur si hors plage horaire param√©tr√©e

### Module 2 : Simulateur journ√©e
- Saisie de l'heure d'arriv√©e
- Saisie des pauses matin (d√©but/fin ou dur√©e)
- Saisie des pauses midi (d√©but/fin ou dur√©e)
- Saisie de l'heure de d√©part
- Calcul automatique de la dur√©e de pause
- Affichage des heures suppl√©mentaires en fonction des saisies
- Mise en forme automatique des horaires

### Module 3 : Calculette pause
- Ajout/suppression dynamique de lignes de pause (d√©but/fin)
- Num√©rotation automatique des pauses
- Calcul du total des pauses (HH:MM et x,xx)
- Affichage du delta par rapport au param√®tre temps de pause
- Mise en forme conditionnelle du delta (positif/negatif)

### Module 4 : Convertisseur HH:MM <-> d√©cimal
- Conversion d'une valeur horaire HH:MM ou HH:MM:SS en d√©cimal (x,xx)
- Conversion d'une valeur d√©cimale en horaire HH:MM ou HH:MM:SS
- Conversion uniquement √† la sortie du champ (blur)
- Adaptation dynamique au format horaire choisi (avec ou sans secondes)

### Module 5 : Addition/Soustraction d'horaires
- Ajout/suppression dynamique de lignes
- Pour chaque ligne : choix entre addition et soustraction (+/-)
- Saisie d'une valeur horaire (HH:MM ou HH:MM:SS)
- Calcul du total (HH:MM ou HH:MM:SS et x,xx)
- Calcul uniquement √† la sortie du champ (blur)
- Boutons + et - visuellement s√©lectionn√©s
- Bouton + √† droite pour ajouter une ligne sous la ligne courante
- Bouton poubelle pour supprimer une ligne
- Champs horaires adaptatifs selon le format global

### Module jours saisis
- Tableau listant chaque jour saisi
- Colonnes : Date, Arriv√©e, Midi, Pause, D√©part, Heures travaill√©es, √âcart, Actions
- Affichage du cumul des pauses (hors midi)
- Affichage des heures travaill√©es (HH:MM et x,xx)
- Affichage de l'√©cart (HH:MM et x,xx)
- Tri par date
- Mise en forme conditionnelle de l'√©cart (rouge si n√©gatif, vert si positif, noir si nul)
- Bouton pour supprimer une entr√©e

### Module param√®tres
- Plages horaires param√©trables (arriv√©e, midi, d√©part)
- Jours de travail s√©lectionnables (lundi √† dimanche)
- Heures √† faire par jour (nombre et HH:MM)
- Heures suppl√©mentaires param√©trables
- Temps de pause offert (en minutes)
- Temps minimal de pause midi (en minutes)
- Interrupteur pour choisir le format horaire global (HH:MM ou HH:MM:SS)
- Application dynamique du format √† tous les champs horaires

### Module vacances
- Gestion des vacances sur l'ann√©e
- S√©lection du type (cong√©s pay√©s, RTT)
- S√©lection de l'ann√©e
- Visualisation du calendrier annuel
- Boutons pour poser des cong√©s, RTT, jours f√©ri√©s, jours rattrap√©s

### Module import/export
- Export Excel de l'ann√©e compl√®te
- Export Excel du mois affich√©
- Import de fichier Excel (format compatible)
- Sauvegarde/restauration automatique des champs et param√®tres via localStorage

## 2. Calculs et conversions
- Conversion HH:MM ou HH:MM:SS <-> minutes
- Conversion minutes <-> HH:MM ou HH:MM:SS
- Conversion HH:MM ou HH:MM:SS <-> d√©cimal (x,xx)
- Calcul du total de pauses (somme des intervalles)
- Calcul des heures travaill√©es (arriv√©e, pauses, d√©part)
- Calcul de l'√©cart par rapport √† la norme
- Calcul des heures suppl√©mentaires
- Calcul du delta de pause par rapport au minimum param√©tr√©
- Prise en compte des formats horaires selon le param√®tre global

## 3. Ergonomie et comportements
- Mise en forme automatique des horaires √† la saisie
- Calculs d√©clench√©s uniquement √† la sortie du champ (blur) pour √©viter les incoh√©rences
- Champs horaires adaptatifs en largeur selon le format (plus large en HH:MM:SS)
- Ajout/suppression dynamique de lignes dans les modules concern√©s
- Boutons d'action clairs et accessibles (+, -, poubelle)
- Affichage conditionnel et indicateurs visuels selon les cas (plages horaires, delta, etc.)

## 4. Sauvegarde et restauration
- Sauvegarde automatique des param√®tres et des champs dans le localStorage
- Restauration automatique √† l'ouverture de la page
- Import/export des donn√©es via Excel

## 5. Divers et √©volutions pr√©vues
- Mode RHT (gestion des heures de r√©duction du temps de travail)
- Graphiques d'√©volution des heures suppl√©mentaires (par semaine, mois, ann√©e)
- Statistiques sur les jours travaill√©s, heures sup, etc.
- Syst√®me de compte/utilisateur (pr√©vu)
- Possibilit√© d'ajouter des pauses suppl√©mentaires dans tous les outils de calculs et le calendrier
- Compteur d'heures de pause total (midi et autres)

## 6. Sp√©cifications d'interface utilisateur (UX/UI)

### Principes g√©n√©raux
- Interface claire, √©pur√©e, accessible sur desktop.
- Modules pr√©sent√©s dans des encadr√©s √† bords arrondis, ombr√©s, espac√©s.
- Les modules 4 (convertisseur) et 5 (addition/soustraction) sont superpos√©s dans la m√™me colonne, chacun dans son propre encadr√©.
- Les champs horaires sont toujours align√©s, de largeur adapt√©e au format (voir plus bas).

### Champs horaires
- Saisie au format HH:MM ou HH:MM:SS selon le param√®tre global.
- Largeur dynamique :
    - HH:MM : 54px
    - HH:MM:SS : 66px
- Placeholder dynamique selon le format.
- Mise en forme automatique √† la saisie (ex : 6 devient 06:00).
- Calculs d√©clench√©s uniquement √† la sortie du champ (√©v√©nement 'blur'), jamais √† chaque frappe, pour √©viter les incoh√©rences.
- Validation implicite : les valeurs invalides (ex : 16:89) ne sont pas prises en compte tant que le champ n'est pas quitt√©.

### Boutons et interactions
- **Boutons d'ajout (+)** :
    - Dans les modules √† lignes dynamiques (pauses, addition/soustraction), un bouton + rond est plac√© √† droite de chaque champ pour ajouter une ligne juste en dessous.
    - Style : rond, fond clair, bord gris, ic√¥ne +, taille adapt√©e (28px).
- **Boutons de suppression (poubelle)** :
    - √Ä droite de chaque ligne (sauf la premi√®re si une seule ligne), bouton avec ic√¥ne poubelle pour supprimer la ligne.
    - Style : rond, fond clair, ic√¥ne üóëÔ∏è, taille adapt√©e.
- **Boutons d'op√©ration (+ et -)** (module addition/soustraction) :
    - Deux boutons ronds √† gauche de chaque champ horaire, pour choisir entre addition et soustraction.
    - Style :
        - + : rond, fond bleu si s√©lectionn√©, texte blanc ; sinon fond blanc, texte bleu, bord bleu.
        - - : rond, fond rouge si s√©lectionn√©, texte blanc ; sinon fond blanc, texte rouge, bord rouge.
    - Le bouton s√©lectionn√© est visuellement mis en avant.
    - Un seul bouton s√©lectionn√© par ligne.
- **Interrupteur format horaire** :
    - Dans les param√®tres, un switch (checkbox stylis√©e) permet de basculer entre HH:MM et HH:MM:SS.
    - Le label √† droite du switch affiche le format s√©lectionn√©.
    - Le changement de format adapte dynamiquement tous les champs horaires de l'application (placeholder, largeur, valeur).

### Tableaux et listes
- Les tableaux (jours saisis, pauses, etc.) sont scrollables si besoin, avec en-t√™tes fixes.
- Les colonnes sont centr√©es, les totaux et √©carts sont mis en valeur (gras, couleur selon le cas).
- Les boutons d'action (supprimer, ajouter) sont toujours visibles et accessibles.

### Ergonomie et accessibilit√©
- Tous les boutons sont accessibles au clavier (tabulation).
- Les champs horaires sont accessibles, avec indication claire du format attendu.
- Les actions critiques (suppression de toutes les entr√©es, etc.) sont confirm√©es par un modal.
- Les couleurs utilis√©es sont contrast√©es et adapt√©es √† la lisibilit√©.

### Comportements dynamiques
- Ajout/suppression de lignes sans rechargement de la page.
- Calculs et conversions toujours d√©clench√©s √† la sortie du champ (blur), jamais √† chaque frappe.
- Les valeurs sont sauvegard√©es dans le localStorage √† chaque modification.
- Les modules s'adaptent automatiquement au format horaire choisi.

### Exemples de comportements attendus
- Dans le module addition/soustraction :
    - Cliquer sur + √† droite d'une ligne ajoute une nouvelle ligne juste en dessous.
    - Cliquer sur la poubelle supprime la ligne.
    - Cliquer sur + ou - √† gauche s√©lectionne l'op√©ration pour la ligne (visuel mis √† jour).
    - Le total n'est recalcul√© qu'apr√®s avoir quitt√© le champ horaire.
- Dans le convertisseur :
    - La conversion ne se fait qu'apr√®s avoir quitt√© le champ.
    - Le format du champ s'adapte √† l'interrupteur global.

---

Ce document d√©crit non seulement toutes les fonctionnalit√©s et calculs, mais aussi l'int√©gralit√© des choix d'interface, de comportements et d'ergonomie, afin que n'importe quel d√©veloppeur puisse reproduire fid√®lement le projet, tant sur le fond que sur la forme. 